# 更新紀錄 (Changelog)

## [v1.8.34] - 
### 新增
- 加入本地語言模型可以使用時的短語加成列表，現在還不能使用，要等本地語言模型可以使用時才能使用(程式碼先做出來等支援，還早)

### 修改
- 修改chrome的本地語言模型下載語言，從中文修改成日文，但因為我不懂日文所以只能慢慢修改...
- 加入瀏覽器的建議增加可以提升SEO的html語句...完全沒必要不過既然看到建議就加入了
- 將NEW API名稱修改為高速翻譯，速度是最快沒錯不過那翻譯水準實在是...
- 清除多餘匯出匯入的模組
- 調整web speech api的語音物件的參數使用方式
- 調整最終結果後的語音重啟時間參數，因為簡化後發現重啟時間可以拉低不會造成影響，重啟失敗間隔邏輯修改
- 修改中國語(香港)聲音認識的方式改成粵語，但翻譯顯示還是書面語
- 將最小化設定儲存的功能取消，因為好像造成困擾了
- 顯示的文字顏色調色盤加入部分快速色彩選擇

---

## [v1.7.25] - 
### 新增
- 無

### 修改
- 移除kuromoji.js的所有相關檔案和程式碼邏輯，因為在正式使用的地方無法使用，原因不明
- 修正使用prompt api時語言代碼不正確的問題
- 整理部分程式碼
- 因為各種原因重啟時加入啟動的參數，因為發現不加入參數好像重啟時可能會有問題，但本地語音模型好像會有延遲狀況，調查中
- 移除onerror事件出現時呼叫重啟的功能，因為產生的同時會出現onend事件，同時重啟的話會造成錯誤所以先移除看狀況決定怎麼做
- 修改使用字型、從放入的JF OPEN 粉圓 2.1修改為從外部調入Google Font

---

## [v1.7.19] - 2025-09-26
### 新增
- 因應之後可以使用的本地模型重新加入分詞工具kuromoji，但還是有可能會移除因為效果一直不佳。

### 修改
- 修改字幕顯示到畫面上的相關邏輯、降低瀏覽器負擔
- 修改recognition參數procLocal的相關程式碼邏輯，改為除非本地端模型可以正常使用，否則一律使用連線方式，並且依照此數值判斷參數continuous的布林值
- 移除部分沒使用到的程式碼，包含看門狗
- 移除一些之前修改後沒有使用到的參數
- 修正文字靠右時偽元素和原始文字分離的狀況
- 修改翻譯文字選擇顯示一行時語音文字也只顯示一行最後都是...的狀況

---

## [V1.6.9] - 2025-09-20
### 新增
- 加入實驗性情境引導，測試用有沒有效果不知(由於之後的chrome版本似乎會造成出錯，所以先註解掉避免出問題)
- 加入web speech api新出的本地模型相關程式碼，但可能是chrome的問題，要到142版之後才能正常使用，所以相關按鍵都先隱藏起來避免出問題

### 修改
- 將原本重置SpeechRecognition這個造成更多問題的邏輯取消掉，先註解掉後面再觀察狀況，有比較好就直接移除了
- 整理一些被AI弄亂的程式碼，只有整理一些...

題外話: 本地執行和連線到Google伺服器的穩定性差太多了...強烈建議等這個功能穩定之後就主打這使用方式

---

## [V1.5.8] - 2025-09-20
### 新增
- 加入實驗性prompt API功能，但還有很多問題所以暫時先放著程式碼不使用
- 移除kuromoji分詞工具，因為沒有成功緩解長時間使用崩潰問題，那使用就沒有意義了
- 加入部分web speech api新出的本地模型相關程式碼，後續會更新，可能...

### 修改
- 修正狀態攔的文字顯示位置錯誤的狀況
- 看門狗機制先取消，因為要觀察到底是哪邊造成的卡住問題
- edge會有っ。的訊息出現，加入跳過這一個訊息翻譯的狀況

---

## [V1.4.5] - 2025-09-19
### 新增
- 移除文字翻譯功能，就觀察應該是完全不會使用到，並且NEW API翻譯品質不佳，沒有使用較大型AI模型翻譯的時候使用此功能完全沒有意義，還不如使用Google翻譯
- 加入Prompt API按鈕，實驗性質，和NEW API按鍵是二選一，功能等之後再做，現在要開啟一大堆實驗性設定才能用。
- 暫時先導入kuromoji分詞工具，等Chrome標準通道141版或142版出來之後可能會移除，因為主要導入是用在緩解Translator API長時間使用會崩潰的問題，確定141版後會修復。

### 修改
- UI微調，因為移除文字翻譯功能，所以將NEW API按鈕移到選單處。
- 除錯紀錄中有一個訊息會曝露翻譯連結，依照AI建議將其移除。
- 最小化按鈕移到左邊
- 加入看門狗機制，避免chrome可能因為伺服器回應速度太慢造成語音辨識卡住的狀況，或許可以解決。

---

## [V1.3.6] - 2025-09-03
### 新增
- 最小化時用的開始錄音和停止錄音按鍵

### 修改
- ray mode的關鍵字替換增加
- 修改Chrome Translator API更新顯示的方式、從原本的輪流更新變成一次一起更新，有好有壞
- 由於已實作最小化的錄音啟動相關按鈕，所以讓最小化按鈕可以儲存狀態
- 修正status panel在頁面縮小時也會縮小的狀況、加入min-height而已
- 修正字幕太多會蓋住UI的狀況
- 修改その他選項內的項目位置、之後還會再修改，預計將NEW API的按鍵放到這裡面

---

## [V1.2.3] - 2025-08-26
### 新增
- 新增Chrome Translator API 的翻譯實作(實驗性質)
- 留言翻譯新增將留言發送到字幕的功能，也會一起進行翻譯 (尚未完善)
- 新增狀態攔，顯示各種訊息用
- 新增最小化按鈕，隱藏控制面板以便讓顯示面板能夠顯示更多字

### 修改
- 部分原本是發送到來源語言的錯誤訊息修改成發送到狀態攔
- 修正不定時翻譯結果不顯示的問題 (不保證修復，因為是不定時所以這邊其實找不到到問題點，只能先嘗試一些地方的邏輯做修改看看)
- 修復文字翻譯框將版面撐過頭的問題
- 日語部分在使用Chrome Translator API時，嘗試使用標點符號替換空格，以避免過多翻譯被省略的狀態

---

## [1.0.6] - 2025-08-17
### 新增
- 修正ray mode的關鍵字替換表每一次都重新調用改為先載入到記憶體中
- 修改增加ray mode的關鍵字過濾表
- 在普通模式下文字的左右也增加音符，方便辨識有沒有產生結果發送翻譯