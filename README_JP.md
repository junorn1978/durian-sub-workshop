<div align="center">
  <a href="./README_EN.md">English</a> | <b>日本語</b> | <a href="./README.md">繁體中文</a>
</div>

# ハムハム字幕アトリエ

このツールは、Vtuber [乙夏れい](https://www.youtube.com/@OtsukaRay) さん向けに作られた「配信用の字幕・翻訳表示ツール」です。  
※「乙夏れいさん専用フィルタ機能」を除き、どなたでも自由に利用できます。

音声をリアルタイムで文字起こしし、その場で翻訳して表示できます。  
OBSでウィンドウをキャプチャすれば、配信画面に翻訳字幕を載せることができます。

---

## 機能紹介

### 音声認識 (Speech Recognition)
以下の認識方式に対応しています：

- **Web Speech API**：ブラウザ内蔵（デフォルト／無料）
- **Deepgram**：音声認識サービス（有料）
  - 新規登録で $200 相当のクレジットが付与されることがあります
  - 目安：**約 $1 / 時間**

### 翻訳 (Translation)
以下の翻訳方式に対応しています：

- **カスタムリンク**：自作のバックエンドと連携（所定フォーマットに対応していれば利用可能）
- **Google (GAS) 翻訳**：Google Apps Script の無料翻訳APIを利用（**1日5000文**まで）
- **ブラウザ内蔵 翻訳API**：新しい翻訳APIを利用（表示は高速ですが、精度は今後の改善に期待）
- **ブラウザ内蔵 AI**：ブラウザ内蔵のAIモデルを利用（現在は実験段階のため未公開。安定後に公開予定）

---

### 対応ブラウザ
- **Chrome**：V145 以上
- **Edge**：V145 以上

---

## 使い方

以下のページにアクセスしてください：  
https://junorn1978.github.io/durian-sub-workshop/

### 基本設定（最初にやること）
1. **音声認識の設定**  
   「音声認識」を、配信で話される主な言語（例：日本語）に設定します。
2. **翻訳先の設定**  
   翻訳したい言語（例：英語）を選びます。
3. **翻訳モードの選択**  
   目的に合う「翻訳モード」を選びます。

### モードについて
- **Cloud モード**  
  選択すると横に `?` ボタンが表示されます。クリックすると詳しい使い方を確認できます。
- **高速翻訳モード**  
  選択すると横にダウンロードボタンが出ます。初回はダウンロードを行い、完了後に **ページを再読み込み** してください。

### 使いやすくするコツ
Webページは「新しいウィンドウ」で開くのがおすすめです。  
必要に応じて、Windows 11 の「アプリモード」を使うか、以下の BAT を利用してください（自動的に新しいウィンドウで開きます）。

- **新しいウィンドウ起動BAT**：
  - [Chrome用](https://junorn1978.github.io/durian-sub-workshop/%E3%83%8F%E3%83%A0%E3%83%8F%E3%83%A0%E5%AD%97%E5%B9%95%E3%82%A2%E3%83%88%E3%83%AA%E3%82%A8_translate%20-%20github%20-%20chrome.bat)
  - [Edge用](https://junorn1978.github.io/durian-sub-workshop/%E3%83%8F%E3%83%A0%E3%83%8F%E3%83%A0%E5%AD%97%E5%B9%95%E3%82%A2%E3%83%88%E3%83%AA%E3%82%A8_translate%20-%20github%20-%20edge.bat)

---

## 上級者向け（自作翻訳APIと連携したい場合）

自作の翻訳API（例：TranslationGemma など）と連携する場合は、バックエンドが下記のリクエスト形式に対応していれば利用できます。

### リクエスト (Request)
- **Method**: `POST`
- **Content-Type**: `application/json`
- **Header (Optional)**: `X-API-Key: <Your-API-Key>`  
  ※URLに `key://` プロトコルが含まれる場合は自動で付与されます

### Payload 例
```json
{
  "text": "翻訳するテキスト",
  "targetLangs": ["en", "ja"],
  "sourceLang": "zh-TW",
  "sequenceId": 123,
  "previousText": "前の文脈（オプション）"
}
```